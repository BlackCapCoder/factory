#ifndef BALANCE_H
#define BALANCE_H

#include <string>
#include <vector>

#include "World.h"
#include "Belt.h"
#include "Splitter.h"
#include "Undergroundee.h"


struct Balancers
{
  static char dir2chr (DIR d)
  {
    switch (d)
    {
      case DIR::N: return '^';
      case DIR::E: return '>';
      case DIR::S: return 'v';
      case DIR::W: return '<';
    }
  }

  static std::string serialize (World & world, int x, int y, int w, int h);

/*

1:1

  ^^
  ^^
  ^^

1:2

  ^^^^
  s^..
  ..^^

1:3

  ..^^^^^^
  ^>>^s^..
  <^s<^<^^
  <v..s^..
  v>>>>^^^
  ......^^

1:4

  ^^^^^^^^
  s^..s^..
  ..s^....
  ....^^..

1:5

1:6

  ^^^^^^^^^^^^
  s^..s^..s^..
  <^s<^<s^....
  <v..s^......
  v>>>>^^^....
  ......^^....

1:7

  ....^^^^^^^^^^^^^^
  <v^<^^^^^^^^^^^^^^
  vvs^..s^..s^..s^..
  vv..s^......s^....
  vv....^^....^^....
  vv....<^^<^>>^....
  vv......s^........
  v>>>>>>>>^^^......
  ..........^^......

1:8

  ^^^^^^^^^^^^^^^^
  s^..s^..s^..s^..
  ..s^......s^....
  ....<^^<^>>^....
  ......s^........
  ........^^......

----------------------

2:1

  ..^^
  s^..
  ^^^^

2:2

  ^^^^
  s^..
  ^^^^

2:3

  ......^^^^^^..
  <v<<^<^^^^^^..
  vv..s^..s^....
  v>s>>^s^..<^^<
  ....U>^^^^u>>^
  ......^^^^....

2:4

  s^..s^
  ..s^..
  ..^^^^

2:5

  ....^^^^^^^^^^
  ..^>>^s^..s^..
  ..u^....u^u^..
  <v<<^<^>>>>>>v
  vvU^s^......vv
  vvs^..^^U^U^vv
  vv..s^..s^..vv
  v>>>>^s^..<^v<
  ......^^^^....

2:6

  ..^^^^^^^^^^^^
  ..s^..s^..^^^^
  ....<^^<^^^^^^
  <v<<^<^^^^s^..
  vv..s^..s^....
  v>s>>^s^..<^^<
  ....U>^^^^u>>^
  ......^^^^....

2:7

  ^^^^^^^^^^^^^^
  ^^s^..s^..s^..
  <^s<<^^<^^^^..
  <v..^<^^s^....
  vv..s^..^^^^..
  v>s>>^s^..<^^<
  ....U>^^^^u>>^
  ......^^^^....

2:8

  ^^^^^^^^^^^^^^^^
  s^..s^..s^..s^..
  ..s^......s^....
  ....^^....^^....
  ....<^^<^>>^....
  ......s^........
  ......^^^^......

---------------

3:1

  ......^^..
  <v<<^<^^..
  vv..s^....
  vvs^..s^..
  v>>^^^^^^^
  ....^^^^^^

3:2

  ......^^^^..
  ......s^....
  ......u^<^^<
  <v<<<<<<^<^^
  vv<v^<U^^^^^
  sv..s^..s^..
  ..v>>^^^^^^^
  ......^^^^^^

3:3

  ..^^..^^^^....
  ^>>^..^^^^....
  <^s<u<^^^^U<^<
  <v..^<s^..^>>^
  vv..s^..s^....
  v>>>>^^^^^^^..
  ......^^^^^^..

3:4

  ^^^^^^^^....
  s^..s^..^>>v
  ^^s^..s^..vv
  ^^..^^^^u^vv
  <^u<^^^^U<v<
  ....^^^^U^..
  ....^^^^^^..

3:5

  ....^^^^^^^^^^
  <v^<^^^^^^^^^^
  vvs^..s^..s^..
  vv^^u^u^s^..^^
  vv<^s<^<^^^>>^
  vv<v..s^..u^..
  vvv>>>>^^^....
  vv<vu<..^^U<^<
  vvvvU^U^^^U^^^
  vvvvs^..s^..^^
  vvv>>^s^..s^..
  v>>>>>>^^^^^^^
  ........^^^^^^

3:6

  ^^^^^^^^^^^^
  s^..s^..s^..
  ^^u^u^s^..^^
  <^s<^<^^^>>^
  <v..s^..u^..
  v>>>>^^^....
  <vu<..^^U<^<
  vvU^U^^^U^^^
  vvs^..s^..^^
  v>>^s^..s^..
  ......^^^^^^

3:7

  ^^^^^^^^^^^^^^
  ^^s^..^^^^^^^^
  <^s<u^s^..s^..
  ....<<^<^^u^..
  ..<vu<^^^^U<^<
  ..vvU^^^^^U^^^
  ..vvs^..s^..^^
  ..v>>^s^..s^..
  ........^^^^^^

3:8

  ^^^^^^^^^^^^^^^^
  ^^^^sv..s^..^^^^
  s^..^^^>>^..s^..
  ..s^..^^^>>>>^..
  ^>>^^^s^..^>>>>v
  <^u<s^..s^..U<v<
  ......^^^^^^....

---------------

4:1

  ....^^..
  ..s^....
  s^..s^..
  ^^^^^^^^

4:2

  ..^^^^..
  ..s^....
  s^..s^..
  ^^^^^^^^

4:3

  ....^^^^^^....
  <v^<^^^^^^....
  vvs^..s^..^>>v
  vv^^s^..s^..vv
  vv^^u^^^^^u^vv
  vv<^u<u^^^U<v<
  v>>vU^..^^U^..
  ..vvs^..s^....
  ..vvu^s^..^^..
  ..v>>>>^^^^^..
  ....U^U^^^^^..
  ....^^^^^^^^..

4:4

  ^^^^^^^^....
  s^..s^..^>>v
  ^^s^..s^..vv
  ^^u^^^^^u^vv
  <^u<^^^^U<v<
  ..U^^^^^U^..
  ..^^^^^^^^..

4:4

  ^^^^^^^^
  s^..s^..
  ^^u^u^^^
  <^^<^>>^
  ..s^....
  ^>>^<^^<
  ^^U^U^^^
  ^^s^..^^
  s^..s^..
  ^^^^^^^^

4:5

  ....^^^^^^^^^^..
  <v^<^^^^^^^^^^..
  vvs^..s^..s^....
  Uvu^^^^^u^u^^^..
  ^>U>s^..u>s>>^..
  <^^<^^^^^>..>v..
  uvs^..s^....vv..
  v>>^u^..<^<<v<..
  ..U^....U^U^....
  ..<^s<u<^^^^U<^<
  ..<v..^<s^..^>>^
  ..vvU^s^..s^....
  ..v>>^^^^^^^^^..
  ......^^^^^^^^..

4:6

  ^^^^^^^^^^^^
  s^..s^..s^..
  ^^u^u^s^..^^
  <^s<^<^^^>>^
  <v..s^..u^..
  v>>>>^^^....
  <vu<..^^U<^<
  vvU^U^^^U^^^
  vvs^..s^..^^
  v>>^s^..s^..
  ....^^^^^^^^

4:7

  ....^^^^^^^^^^^^^^
  <v^<^^^^^^^^^^^^^^
  vvs^..s^..s^..s^..
  vvu^s^..^^^^s^..^^
  v>s>>^..^^^^..^^^^
  ....U>^>>^^^u>>^^^
  ..U^^>>^^>>^....^^
  ..s^....^^^>>>>>>^
  ..^^<^^<s^..^>>>>v
  ..<^u<s^..s^..U<v<
  ......^^^^^^^^....
  ......^^^^^^^^....
  ......^^^^^^^^....

4:8

  ^^^^^^^^^^^^^^^^
  ^^^^s^..s^..^^^^
  s^..^^^^>^^^s^..
  ..s^..^^^>>>>^..
  ^>>^^^s^..^>>>>v
  <^u<s^..s^..U<v<
  ....^^^^^^^^....

-----------------

5:1

  ........^^....
  ....<v^<^^....
  ..s<v<s^......
  <v..^<^^<^^<..
  vv..s^....^^..
  vvs^..s^..s^..
  v>>^^^^^^^^^^^
  ....^^^^^^^^^^

5:2

  ......^^^^....
  ......s^......
  <v<<^<^^<^^<..
  vv..s^....^^..
  vvs^..s^..s^..
  v>>^^^^^^^^^^^
  ....^^^^^^^^^^
  ....^^^^^^^^^^

5:3

  ....^^^^^^....
  <v^<^^^^^^....
  vvs^..s^..^>>v
  vv^^s^..s^..vv
  vv^^u^^^u^u^vv
  vv<^u<^^..U<v<
  vv..U^^^^>>>>v
  vv^>>^s^..s<v<
  vv^^..^^<^..^<
  vv^^s^..U^U^^^
  vvs^..s^..s^..
  v>>^^^^^^^^^^^
  ....^^^^^^^^^^

5:4

  ^^^^^^^^....
  s^..s^..^>>v
  ^^s^..s^..vv
  ^^u^^^u^u^vv
  <^u<^^..U<v<
  ..U^^^^>>>>v
  ^>>^s^..s<v<
  ^^..^^<^..^<
  ^^s^..U^U^^^
  s^..s^..s^..
  ..^^^^^^^^^^

5:5

  ......^^^^^^^^^^....
  ......^^^^^^^^^^^>>v
  <v<<^<s^..s^..s^..vv
  vv..s^..^^^^u^u^^^vv
  v>s>>^u^^^^^^>>>>^vv
  ^>..U>^>>^s^..u>>vvv
  ^^^>>>>^^>>^<^<<v<vv
  ^^<^s<u<u^....U<^<vv
  <^<<..<<<<^<U^U^^^vv
  ......U^U^^^s^..^^vv
  ......s^..s^..s^..vv
  ......^^^^^^^^^^<^v<
  ......^^^^^^^^^^....

5:7


  ^^^^^^^^^^^^^^....
  s^..s^..^^^^^^^>>v
  ^^s^..^^s^..s^..vv
  ^^..u^^^^^u^u^^^vv
  ^^^>>>>^<^^<^>>^vv
  s^....^>>vs^....vv
  ^^<^u<u^v>>^U<^<vv
  <^<<<<<<^<U^U^^^vv
  ....U^U^^^s^..^^vv
  ....s^..s^..s^..vv
  ....^^^^^^^^^^<^v<
  ....^^^^^^^^^^....


5:8


  ^^^^^^^^^^^^^^^^
  ^^^^^^^^s^..s^..
  ^^^^^^^^^^s^..^^
  s^..s^..^^u^..^^
  ^^s^..u^^^^>>>>^
  ^^..<^u<s^..U<^<
  ^^......u^^^^>>^
  ^^^>>>>>>>>^^^..
  ^^u^......U^^^..
  <^<<^<U^..^^^^..
  ..U^s^..U^^^^^..
  ..s^..s^..s^....
  ....^^^^^^^^^^..

-------------

6:1

  ......^^....
  <v<<^<^^....
  v>s>s^......
  ^>..>^^^....
  ^^....s^....
  s^..s^..s^..
  ^^^^^^^^^^^^

6:2

  ........^^^^
  <v<<<<^<^^^^
  vv<v^<u^^^^^
  sv..<^^<^^^^
  ..v>s>>^s^..
  ..^>..>>>^^^
  ..^^..U^^>>^
  ..^^..s^....
  s^..s^..s^..
  ^^^^^^^^^^^^

6:3

  ....^^^^^^....
  ^>>>>^^^^^....
  <^s<u<^^^^U<^<
  <v..^<s^..^>>^
  v>s>>^^^^^^^..
  ^>..>>>^^^^^..
  <^^<....s^....
  ..s^..s^..s^..
  ..^^^^^^^^^^^^
  ..^^^^^^^^^^^^
  ..^^^^^^^^^^^^

6:4

  ....^^^^^^^^
  <v^<s^..s^..
  vvs^..s^..^^
  vvu^u^^^u^^^
  v>U>..^^u>>^
  <v<<^<^^U^..
  v>s>s^..<^^<
  ^>..>^^^..^^
  ^^U^U^s^..^^
  s^..s^..s^..
  ^^^^^^^^^^^^

6:5

  ........^^^^^^^^^^
  ..s<<<^<^^^^^^^^^^
  <v..^<s^..s^..s^..
  vv..s^..^^^^u^u^^^
  v>s>..u^^^^^^>>>>^
  ^>..U>^>>^s^..u>>v
  ^^^>>>>^^>>^<^<<v<
  ^^<^s<u<u^....U<^<
  <^<<..<<<<^<U^U^^^
  ......U^U^^^s^..^^
  ......s^..s^..s^..
  ......^^^^^^^^^^^^

6:6

  ....^^^^^^^^^^^^
  <v^<s^..s^..s^..
  vvs^..^^^^u^u^^^
  vv..u^^^^^^>>>>^
  v>U>^>>^s^..u>>v
  ^>>>>^^>>^<^<<v<
  <^s<u<u^....U<^<
  ....<<<<^<U^U^^^
  ....U^U^^^s^..^^
  ....s^..s^..s^..
  ....^^^^^^^^^^^^

6:7

  ......^^^^^^^^^^^^^^
  ..<v^<^^^^^^^^^^^^^^
  ..vvs^..s^..s^..s^..
  ..vvu^s^..^^^^u^u^^^
  ..v>s>>^u^^^^^^>>>>^
  ......U>^>>^s^..u>>v
  ^>U>U^u>>^^>>^<^<<v<
  ^^..<^s<u<u^....U<^<
  <^<<<<..<<<<^<U^U^^^
  ........U^U^^^s^..^^
  ........s^..s^..s^..
  ........^^^^^^^^^^^^

6:8

  ^^^^^^^^^^^^^^^^
  s^..s^..^^^^^^^^
  ^^s^..^^s^..s^..
  ^^..u^^^^^u^u^^^
  ^^^>>>>^<^^<^>>^
  s^....^>>vs^....
  ^^<^u<u^v>>^U<^<
  <^<<<<<<^<U^U^^^
  ....U^U^^^s^..^^
  ....s^..s^..s^..
  ....^^^^^^^^^^^^

-------------------

7:1

  ..........^^......
  <v<<<<<<^<^^......
  vv......s^........
  vv....^>>^<^^<....
  vv..s^......s^....
  vvs^..s^..s^..s^..
  v>>^^^^^^^^^^^^^^^
  ....^^^^^^^^^^^^^^

7:2

  ......^^^^....
  <v<<^<s^......
  v>s>s^..^^....
  ^>..>^^^^^....
  ^^..^>>^^^....
  ^^s^....s^....
  ^^^^^^s^..s^..
  ^^^^^^^^^^^^^^

7:3

  ........^^^^^^..
  <v<<<<^<^^^^^^..
  v>s>..s^..s^....
  ^>..s>>^^^^^<^^<
  ^^^>..U>s^..u>>^
  ^^s^....^^^^....
  ^^^^^^s^..s^....
  ^^^^^^^^^^^^^^..

7:4

  ......^^^^^^^^^^
  <v<<^<^^^^^^^^^^
  vv..s^..s^..s^..
  v>s>>^u^^^s^..^^
  ^>..>>s>>^u^u^^^
  <^^<^>..>>>>>>>^
  ..^^^^U^..U^U^..
  ..^^s^..s^..s^..
  ..^^^^^^^^^^^^^^

7:5

  ..........^^^^^^^^^^..
  ....s<<<^<^^^^^^^^^^..
  ..s<..^<s^..s^..s^....
  <v..^<u^u^^^^^u^u^^^..
  v>>v^^^>>>>^<^^<^>>^..
  ..Uvs^....^>>vs^......
  ....^^<^u<u^v>>^^^U<^<
  ^>U><^<<<<^<u>>>>^^>>^
  <^<<^<U^U^<^^<U^U^^^..
  ....^^s^..U^^^s^..^^..
  ..uvs^..s^..s^..s^....
  ..v>>^^^^^^^^^^^^^^^..
  ......^^^^^^^^^^^^^^..

7:6

  ........^^^^^^^^^^^^..
  ..s<<<^<s^..s^..s^....
  <v..^<u^u^^^^^u^u^^^..
  v>>v^^^>>>>^<^^<^>>^..
  ..Uvs^....^>>vs^......
  ....^^<^u<u^v>>^^^U<^<
  ^>U><^<<<<^<u>>>>^^>>^
  <^<<^<U^U^<^^<U^U^^^..
  ....^^s^..U^^^s^..^^..
  ..uvs^..s^..s^..s^....
  ..v>>^^^^^^^^^^^^^^^..
  ......^^^^^^^^^^^^^^..

7:7

  ......^^^^^^^^^^^^^^..
  ..<v^<^^^^^^^^^^^^^^..
  ..vvs^..s^..s^..s^....
  ..vv^^u^u^^^^^u^u^^^..
  ..Uv^^^>>>>^<^^<^>>^..
  ....s^....^>>vs^......
  ....^^<^u<u^v>>^^^U<^<
  ^>U><^<<<<^<u>>>>^^>>^
  <^<<^<U^U^<^^<U^U^^^..
  ..uv^^s^..U^^^s^..^^..
  ..vvs^..s^..s^..s^....
  ..v>>^^^^^^^^^^^^^^^..
  ......^^^^^^^^^^^^^^..

-----------------

8:1

  ........^^......
  ......s^........
  ....^>>^<^^<....
  ..s^......s^....
  s^..s^..s^..s^..
  ^^^^^^^^^^^^^^^^

8:2

  ......^^^^......
  ......s^........
  ....^>>^<^^<....
  ..s^......s^....
  s^..s^..s^..s^..
  ^^^^^^^^^^^^^^^^

8:3

  ..........^^^^^^
  ..<v<<<<^<^^^^^^
  ..vv....s^..s^..
  ..v>s>..^^s^..^^
  ..^>..s>>^u^u^^^
  ..^^^>..>>>>>>>^
  ..^^^^....U^U^..
  s^..s^..s^..s^..
  ^^^^^^^^^^^^^^^^
8:4

  ........^^^^^^^^
  ........s^..s^..
  ........^^s^..^^
  ..^>>>>>>^u^u^^^
  ..^^^>>>>>>>>>>^
  ..s^......U^U^..
  s^..s^..s^..s^..
  ^^^^^^^^^^^^^^^^

8:6

  ........^^^^^^^^^^^^......
  ....<v^<^^^^^^^^^^^^^>>v..
  ....vvs^..s^..s^..s^..vv..
  ....vv^^u^u^^^^^u^u^^^vv..
  ....vv^^^>>>>^<^^<^>>^v>>v
  <v<<v<s^....^>>vs^....s<v<
  v>s>..^^<^u<u^v>>^^^U<..^<
  ^>..U><^<<<<^<u>>>>^^>>>>^
  <^<<<<^<U^U^<^^<U^U^^^....
  ......^^s^..U^^^s^..^^....
  ......s^..s^..s^..s^......
  ......^^^^^^^^^^^^^^^^....
  ......^^^^^^^^^^^^^^^^....

8:8

  ....^^^^^^^^^^^^^^^^..
  ....s^..s^..s^..s^....
  ....^^u^u^^^^^u^u^^^..
  ....^^^>>>>^<^^<^>>^..
  ....s^....^>>vs^......
  ....^^<^u<u^v>>^^^U<^<
  ^>U><^<<<<^<u>>>>^^>>^
  <^<<^<U^U^<^^<U^U^^^..
  ....^^s^..U^^^s^..^^..
  ....s^..s^..s^..s^....
  ....^^^^^^^^^^^^^^^^..

*/

};


#endif // BALANCE_H
